<!doctype html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>非官方殺戮小隊閱讀器（測試）</title>
  <link rel="stylesheet" href="styles.css?v=20260212-19aaa" />
</head>

<body>
  <div class="app">
    <header class="top">
      <h1>非官方殺戮小隊閱讀器（測試）</h1>
      <!-- <div class="hint">目前載入 3 隊：偵查狼殺戮小隊/瘟疫戰士/風暴飛鷹。</div> -->
    </header>

    <section class="toolbar">
      <label>
        切換隊伍
        <select id="teamSelect"></select>
      </label>
      <label class="font-size-control">
        字級
        <input id="fontSize" type="range" min="14" max="24" value="17" />
      </label>
      <div class="hint" id="teamMeta"></div>
    </section>

    <main class="content">
      <section class="panel">
        <div class="panel-title panel-title-with-action">
          <span id="listPanelTitle">特工清單</span>
          <div class="panel-title-actions">
            <button id="openSelectionRulesBtn" class="panel-action-btn" type="button">特工選擇規則</button>
            <button id="unitFilterBtn" class="panel-action-btn" type="button">單位：顯示全部</button>
            <button id="equipmentFilterBtn" class="panel-action-btn" type="button">裝備：顯示全部</button>
          </div>
        </div>
        <div class="panel-body">
          <div class="tabs" id="tabs">
            <button class="tab active" data-key="units">特工</button>
            <button class="tab" data-key="faction_rules">陣營規則</button>
            <button class="tab" data-key="strategic_ploys">戰略計謀</button>
            <button class="tab" data-key="tactical_ploys">交戰計謀</button>
            <button class="tab" data-key="equipment">陣營裝備</button>
          </div>
          <div class="item-list" id="itemList"></div>
        </div>
      </section>

      <section class="panel" id="detailPanel">
        <div class="panel-title" id="detailTitle">內容</div>
        <div class="panel-body" id="detailView"></div>
      </section>
    </main>
    <footer class="site-disclaimer">
      本網站為非官方粉絲製作工具，與 Games Workshop 無任何隸屬或授權關係。一切資料皆是
      <a href="https://www.warhammer-community.com/en-gb/downloads/kill-team/" target="_blank"
        rel="noopener noreferrer">https://www.warhammer-community.com/en-gb/downloads/kill-team/</a>
      線上公開的免費資訊，沒有包含任何需付費（實體規則書）內容。
    </footer>
  </div>
  <div class="floating-actions" aria-label="快速操作">
    <button id="openScoreBtn" class="score-fab" type="button">
      計分
    </button>
    <button id="resetWoundsBtn" class="reset-wounds-fab" type="button">
      重置耐傷
    </button>
    <button id="resetPloyChecksBtn" class="reset-ploy-fab" type="button">
      重置計謀
    </button>
    <button id="toggleScriptBtn" class="script-mode-fab" type="button">
      簡/繁
    </button>
  </div>
  <div id="selectionRulesOverlay" class="selection-rules-overlay is-hidden" aria-hidden="true">
    <div class="selection-rules-modal" role="dialog" aria-modal="true" aria-label="特工選擇規則">
      <div class="selection-rules-head">
        <h3 id="selectionRulesTitle">特工選擇規則</h3>
        <button id="closeSelectionRulesBtn" class="selection-rules-close" type="button">關閉</button>
      </div>
      <div id="selectionRulesContent" class="selection-rules-body text"></div>
    </div>
  </div>
  <div id="scoreOverlay" class="score-overlay is-hidden" aria-hidden="true">
    <div class="score-panel" role="dialog" aria-modal="true" aria-label="計分頁面">
      <div class="score-head">
        <h3>計分</h3>
        <div class="score-timer">
          <span id="scoreTimerDisplay">00:00</span>
          <button id="scoreTimerStartBtn" class="score-close" type="button">開始計時</button>
          <button id="scoreTimerPauseBtn" class="score-close is-hidden" type="button">暫停</button>
          <button id="scoreTimerEndBtn" class="score-close is-hidden" type="button">結束</button>
        </div>
        <button id="closeScoreBtn" class="score-close" type="button">關閉</button>
      </div>
      <div class="score-body">
        <div class="score-team">
          <label>玩家 A 名稱
            <input id="scoreP1Name" type="text" placeholder="玩家 A" />
          </label>
          <div class="score-round-table">
            <div class="score-round-head">
              <span>回合</span><span>主</span><span>副</span><span>擊殺</span><span>小計</span>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R1</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r1_main" data-delta="-1">-</button><strong
                  data-score-bind="p1_r1_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r1_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r1_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p1_r1_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r1_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r1_kill" data-delta="-1">-</button><strong
                  data-score-bind="p1_r1_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r1_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p1_r1">0</strong>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R2</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r2_main" data-delta="-1">-</button><strong
                  data-score-bind="p1_r2_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r2_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r2_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p1_r2_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r2_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r2_kill" data-delta="-1">-</button><strong
                  data-score-bind="p1_r2_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r2_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p1_r2">0</strong>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R3</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r3_main" data-delta="-1">-</button><strong
                  data-score-bind="p1_r3_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r3_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r3_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p1_r3_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r3_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r3_kill" data-delta="-1">-</button><strong
                  data-score-bind="p1_r3_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r3_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p1_r3">0</strong>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R4</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r4_main" data-delta="-1">-</button><strong
                  data-score-bind="p1_r4_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r4_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r4_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p1_r4_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r4_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p1_r4_kill" data-delta="-1">-</button><strong
                  data-score-bind="p1_r4_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p1_r4_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p1_r4">0</strong>
            </div>
            <div class="score-total-row">總VP <strong data-score-bind-grand-total="p1">0</strong></div>
            <div class="score-bonus-row" aria-label="玩家A加權項目">
              <span>加權 x1.5</span>
              <div class="score-bonus-group">
                <button type="button" data-score-action="set-bonus" data-score-player="p1"
                  data-score-bonus="main">主</button>
                <button type="button" data-score-action="set-bonus" data-score-player="p1"
                  data-score-bonus="secondary">副</button>
                <button type="button" data-score-action="set-bonus" data-score-player="p1"
                  data-score-bonus="kill">擊殺</button>
              </div>
            </div>
          </div>
        </div>

        <div class="score-team">
          <label>玩家 B 名稱
            <input id="scoreP2Name" type="text" placeholder="玩家 B" />
          </label>
          <div class="score-round-table">
            <div class="score-round-head">
              <span>回合</span><span>主</span><span>副</span><span>擊殺</span><span>小計</span>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R1</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r1_main" data-delta="-1">-</button><strong
                  data-score-bind="p2_r1_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r1_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r1_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p2_r1_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r1_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r1_kill" data-delta="-1">-</button><strong
                  data-score-bind="p2_r1_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r1_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p2_r1">0</strong>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R2</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r2_main" data-delta="-1">-</button><strong
                  data-score-bind="p2_r2_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r2_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r2_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p2_r2_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r2_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r2_kill" data-delta="-1">-</button><strong
                  data-score-bind="p2_r2_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r2_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p2_r2">0</strong>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R3</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r3_main" data-delta="-1">-</button><strong
                  data-score-bind="p2_r3_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r3_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r3_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p2_r3_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r3_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r3_kill" data-delta="-1">-</button><strong
                  data-score-bind="p2_r3_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r3_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p2_r3">0</strong>
            </div>
            <div class="score-round-row">
              <span class="round-tag">R4</span>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r4_main" data-delta="-1">-</button><strong
                  data-score-bind="p2_r4_main">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r4_main" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r4_secondary" data-delta="-1">-</button><strong
                  data-score-bind="p2_r4_secondary">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r4_secondary" data-delta="1">+</button></div>
              <div class="score-mini-stepper"><button type="button" data-score-action="delta"
                  data-score-field="p2_r4_kill" data-delta="-1">-</button><strong
                  data-score-bind="p2_r4_kill">0</strong><button type="button" data-score-action="delta"
                  data-score-field="p2_r4_kill" data-delta="1">+</button></div>
              <strong data-score-bind-round-total="p2_r4">0</strong>
            </div>
            <div class="score-total-row">總VP <strong data-score-bind-grand-total="p2">0</strong></div>
            <div class="score-bonus-row" aria-label="玩家B加權項目">
              <span>加權 x1.5</span>
              <div class="score-bonus-group">
                <button type="button" data-score-action="set-bonus" data-score-player="p2"
                  data-score-bonus="main">主</button>
                <button type="button" data-score-action="set-bonus" data-score-player="p2"
                  data-score-bonus="secondary">副</button>
                <button type="button" data-score-action="set-bonus" data-score-player="p2"
                  data-score-bonus="kill">擊殺</button>
              </div>
            </div>
          </div>
        </div>

        <label>備註
          <textarea id="scoreNotes" rows="3" placeholder="記錄重點事件"></textarea>
        </label>
        <div class="score-playlog">
          <h4>遊玩過程(需要啟動計時功能才會顯示)</h4>
          <div id="scorePlayLogList" class="score-playlog-list"></div>
        </div>
      </div>
      <div class="score-foot">
        <button id="scoreResetBtn" type="button" class="score-reset-btn">重置計分</button>
        <button id="scoreResetLogBtn" type="button" class="score-reset-btn">重置過程</button>
        <button id="scoreResetAllBtn" type="button" class="score-reset-btn">清除</button>
        <button id="scoreExportBtn" type="button" class="score-reset-btn">匯出圖片</button>
      </div>
    </div>
  </div>

  <script id="fallbackData" type="application/json">
      {"version":"fallback","teams":[]}
    </script>

  <script src="app.js?v=20260213-equipment-revert"></script>
</body>

</html>
